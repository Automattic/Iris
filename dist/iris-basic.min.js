!function(i,r){var e,t,s,o,a,n,l,p,c;if(e='<div class="iris-picker"><div class="iris-picker-inner"><div class="iris-square"><a class="iris-square-value" href="#"><span class="iris-square-handle ui-slider-handle"></span></a><div class="iris-square-inner iris-square-horiz"></div><div class="iris-square-inner iris-square-vert"></div></div><div class="iris-slider iris-strip"><div class="iris-slider-offset"></div></div></div></div>',a='.iris-picker{display:block;position:relative}.iris-picker,.iris-picker *{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input+.iris-picker{margin-top:4px}.iris-error{background-color:#ffafaf}.iris-border{border-radius:3px;border:1px solid #aaa;width:200px;background-color:#fff}.iris-picker-inner{position:absolute;top:0;right:0;left:0;bottom:0}.iris-border .iris-picker-inner{top:10px;right:10px;left:10px;bottom:10px}.iris-picker .iris-square-inner{position:absolute;left:0;right:0;top:0;bottom:0}.iris-picker .iris-square,.iris-picker .iris-slider,.iris-picker .iris-square-inner,.iris-picker .iris-palette{border-radius:3px;box-shadow:inset 0 0 5px rgba(0,0,0,.4);height:100%;width:12.5%;float:left;margin-right:5%}.iris-picker .iris-square{width:76%;margin-right:10%;position:relative}.iris-picker .iris-square-inner{width:auto;margin:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-square-inner,.iris-ie-9 .iris-palette{box-shadow:none;border-radius:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-palette{outline:1px solid rgba(0,0,0,.1)}.iris-ie-lt9 .iris-square,.iris-ie-lt9 .iris-slider,.iris-ie-lt9 .iris-square-inner,.iris-ie-lt9 .iris-palette{outline:1px solid #aaa}.iris-ie-lt9 .iris-square .ui-slider-handle{outline:1px solid #aaa;background-color:#fff;-ms-filter:"alpha(Opacity=30)"}.iris-ie-lt9 .iris-square .iris-square-handle{background:0;border:3px solid #fff;-ms-filter:"alpha(Opacity=50)"}.iris-picker .iris-strip{margin-right:0;position:relative}.iris-picker .iris-strip .ui-slider-handle{position:absolute;background:0;margin:0;right:-3px;left:-3px;border:4px solid #aaa;border-width:4px 3px;width:auto;height:6px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.2);opacity:.9;z-index:5;cursor:ns-resize}.iris-strip .ui-slider-handle:before{content:" ";position:absolute;left:-2px;right:-2px;top:-3px;bottom:-3px;border:2px solid #fff;border-radius:3px}.iris-picker .iris-slider-offset{position:absolute;top:11px;left:0;right:0;bottom:-3px;width:auto;height:auto;background:transparent;border:0;border-radius:0}.iris-picker .iris-square-handle{background:transparent;border:5px solid #aaa;border-radius:50%;border-color:rgba(128,128,128,.5);box-shadow:none;width:12px;height:12px;position:absolute;left:-10px;top:-10px;cursor:move;opacity:1;z-index:10}.iris-picker .ui-state-focus .iris-square-handle{opacity:.8}.iris-picker .iris-square-handle:hover{border-color:#999}.iris-picker .iris-square-value:focus .iris-square-handle{box-shadow:0 0 2px rgba(0,0,0,.75);opacity:.8}.iris-picker .iris-square-handle:hover::after{border-color:#fff}.iris-picker .iris-square-handle::after{position:absolute;bottom:-4px;right:-4px;left:-4px;top:-4px;border:3px solid #f9f9f9;border-color:rgba(255,255,255,.8);border-radius:50%;content:" "}.iris-picker .iris-square-value{width:8px;height:8px;position:absolute}.iris-ie-lt9 .iris-square-value,.iris-mozilla .iris-square-value{width:1px;height:1px}.iris-palette-container{position:absolute;bottom:0;left:0;margin:0;padding:0}.iris-border .iris-palette-container{left:10px;bottom:10px}.iris-picker .iris-palette{margin:0;cursor:pointer}.iris-square-handle,.ui-slider-handle{border:0;outline:0}',l=navigator.userAgent.toLowerCase(),p="Microsoft Internet Explorer"===navigator.appName,c=p?parseFloat(l.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,s=!1,o=["-moz-","-webkit-","-o-","-ms-"],(t=p&&c<10)&&c<=7)return i.fn.iris=i.noop,void(i.support.iris=!1);function d(r,e){return r="top"===r?"top":"left",e=i.isArray(e)?e:Array.prototype.slice.call(arguments,1),"webkit"===s?(a=e,n=[],t="top"===(t=r)?"0% 0%,0% 100%,":"0% 100%,100% 100%,",a=h(a),i.each(a,function(i,r){n.push("color-stop("+parseFloat(r.stop)/100+", "+r.color+")")}),"-webkit-gradient(linear,"+t+n.join(",")+")"):o[s]+"linear-gradient("+r+", "+e.join(", ")+")";var t,a,n}function h(r){var e=[],t=[],s=[],o=r.length-1;return i.each(r,function(i,r){var s=r,o=!1,a=r.match(/1?[0-9]{1,2}%$/);a&&(s=r.replace(/\s?1?[0-9]{1,2}%$/,""),o=a.shift()),e.push(s),t.push(o)}),!1===t[0]&&(t[0]="0%"),!1===t[o]&&(t[o]="100%"),t=function r(e){var t,s,o,a,n=0,l=e.length-1,p=0,c=!1;if(e.length<=2||i.inArray(!1,e)<0)return e;for(;p<e.length-1;)c||!1!==e[p]?c&&!1!==e[p]&&(l=p,p=e.length):(n=p-1,c=!0),p++;s=l-n;a=parseInt(e[n].replace("%"),10);t=(parseFloat(e[l].replace("%"))-a)/s;p=n+1;o=1;for(;p<l;)e[p]=a+o*t+"%",o++,p++;return r(e)}(t),i.each(t,function(i){s[i]={color:e[i],stop:t[i]}}),s}i.support.iris=!0,i.fn.gradient=function(){var r=arguments;return this.each(function(){t?function(r,e){var t,s,o,a,n;r="top"===r?"top":"left",e=i.isArray(e)?e:Array.prototype.slice.call(arguments,1),t="top"===r?0:1,s=i(this),o=e.length-1,a='<div class="iris-ie-gradient-shim" style="position:absolute;'+(1===t?"height":"width")+":100%;"+(1===t?"left":"top")+":%start%;"+(1===t?"right":"bottom")+':%end%;filter:%filter%;" data-color:"%color%"></div>',n="","static"===s.css("position")&&s.css({position:"relative"}),e=h(e),i.each(e,function(i,r){var s,l,p;if(i===o)return!1;s=e[i+1],r.stop!==s.stop&&(l=100-parseFloat(s.stop)+"%",r.octoHex=new Color(r.color).toIEOctoHex(),s.octoHex=new Color(s.color).toIEOctoHex(),p="progid:DXImageTransform.Microsoft.Gradient(GradientType="+t+", StartColorStr='"+r.octoHex+"', EndColorStr='"+s.octoHex+"')",n+=a.replace("%start%",r.stop).replace("%end%",l).replace("%filter%",p))}),s.find(".iris-ie-gradient-shim").remove(),i(n).prependTo(s)}.apply(this,r):i(this).css("backgroundImage",d.apply(this,r))})},i.fn.raninbowGradient=function(r,e){var t,s,o,a;for(r=r||"top",s="hsl(%h%,"+(t=i.extend({},{s:100,l:50},e)).s+"%,"+t.l+"%)",o=0,a=[];o<=360;)a.push(s.replace("%h%",o)),o+=30;return this.each(function(){i(this).gradient(r,a)})},n={options:{color:!1,mode:"hsl",controls:{horiz:"s",vert:"l",strip:"h"},hide:!0,border:!0,target:!1,width:200,palettes:!1},_color:"",_palettes:["#000","#fff","#d33","#d93","#ee2","#81d742","#1e73be","#8224e3"],_inited:!1,_defaultHSLControls:{horiz:"s",vert:"l",strip:"h"},_defaultHSVControls:{horiz:"h",vert:"v",strip:"s"},_scale:{h:360,s:100,l:100,v:100},_create:function(){var r,a,n,d=this,h=d.element,u=d.options.color||h.val();!1===s&&(n="backgroundImage",t?s="filter":(r=i('<div id="iris-gradtest" />'),a="linear-gradient(top,#fff,#000)",i.each(o,function(i,e){if(r.css(n,e+a),r.css(n).match("gradient"))return s=i,!1}),!1===s&&(r.css("background","-webkit-gradient(linear,0% 0%,0% 100%,from(#fff),to(#000))"),r.css(n).match("gradient")&&(s="webkit")),r.remove())),h.is("input")?(d.options.target?d.picker=i(e).appendTo(d.options.target):d.picker=i(e).insertAfter(h),d._addInputListeners(h)):(h.append(e),d.picker=h.find(".iris-picker")),p?9===c?d.picker.addClass("iris-ie-9"):c<=8&&d.picker.addClass("iris-ie-lt9"):l.indexOf("compatible")<0&&l.indexOf("khtml")<0&&l.match(/mozilla/)&&d.picker.addClass("iris-mozilla"),d.options.palettes&&d._addPalettes(),d._color=new Color(u).setHSpace(d.options.mode),d.options.color=d._color.toString(),d.controls={square:d.picker.find(".iris-square"),squareDrag:d.picker.find(".iris-square-value"),horiz:d.picker.find(".iris-square-horiz"),vert:d.picker.find(".iris-square-vert"),strip:d.picker.find(".iris-strip"),stripSlider:d.picker.find(".iris-strip .iris-slider-offset")},"hsv"===d.options.mode&&d._has("l",d.options.controls)?d.options.controls=d._defaultHSVControls:"hsl"===d.options.mode&&d._has("v",d.options.controls)&&(d.options.controls=d._defaultHSLControls),d.hue=d._color.h(),d.options.hide&&d.picker.hide(),d.options.border&&d.picker.addClass("iris-border"),d._initControls(),d.active="external",d._dimensions(),d._change()},_has:function(r,e){var t=!1;return i.each(e,function(i,e){if(r===e)return t=!0,!1}),t},_addPalettes:function(){var r=i('<div class="iris-palette-container" />'),e=i('<a class="iris-palette" tabindex="0" />'),t=i.isArray(this.options.palettes)?this.options.palettes:this._palettes;this.picker.find(".iris-palette-container").length&&(r=this.picker.find(".iris-palette-container").detach().html("")),i.each(t,function(i,t){e.clone().data("color",t).css("backgroundColor",t).appendTo(r).height(10).width(10)}),this.picker.append(r)},_paint:function(){this._paintDimension("top","strip"),this._paintDimension("top","vert"),this._paintDimension("left","horiz")},_paintDimension:function(i,r){var e,t=this,s=t._color,o=t.options.mode,a=t._getHSpaceColor(),n=t.controls[r],l=t.options.controls;if(r!==t.active&&("square"!==t.active||"strip"===r))switch(l[r]){case"h":if("hsv"===o){switch(a=s.clone(),r){case"horiz":a[l.vert](100);break;case"vert":a[l.horiz](100);break;case"strip":a.setHSpace("hsl")}e=a.toHsl()}else e="strip"===r?{s:a.s,l:a.l}:{s:100,l:a.l};n.raninbowGradient(i,e);break;case"s":"hsv"===o?"vert"===r?e=[s.clone().a(0).s(0).toCSS("rgba"),s.clone().a(1).s(0).toCSS("rgba")]:"strip"===r?e=[s.clone().s(100).toCSS("hsl"),s.clone().s(0).toCSS("hsl")]:"horiz"===r&&(e=["#fff","hsl("+a.h+",100%,50%)"]):e="vert"===r&&"h"===t.options.controls.horiz?["hsla(0, 0%, "+a.l+"%, 0)","hsla(0, 0%, "+a.l+"%, 1)"]:["hsl("+a.h+",0%,50%)","hsl("+a.h+",100%,50%)"],n.gradient(i,e);break;case"l":e="strip"===r?["hsl("+a.h+",100%,100%)","hsl("+a.h+", "+a.s+"%,50%)","hsl("+a.h+",100%,0%)"]:["#fff","rgba(255,255,255,0) 50%","rgba(0,0,0,0) 50%","rgba(0,0,0,1)"],n.gradient(i,e);break;case"v":e="strip"===r?[s.clone().v(100).toCSS(),s.clone().v(0).toCSS()]:["rgba(0,0,0,0)","#000"],n.gradient(i,e)}},_getHSpaceColor:function(){return"hsv"===this.options.mode?this._color.toHsv():this._color.toHsl()},_dimensions:function(r){var e,t,s,o=this,a=o.options,n=o.controls.square,l=o.picker.find(".iris-strip"),p="77.5%",c="12%",d=a.border?a.width-20:a.width,h=i.isArray(a.palettes)?a.palettes.length:o._palettes.length;if(r&&(n.css("width",""),l.css("width",""),o.picker.css({width:"",height:""})),p=d*(parseFloat(p)/100),c=d*(parseFloat(c)/100),e=a.border?p+20:p,n.width(p).height(p),l.height(p).width(c),o.picker.css({width:a.width,height:e}),!a.palettes)return o.picker.css("paddingBottom","");s=(p-(h-1)*(t=2*p/100))/h,o.picker.find(".iris-palette").each(function(r){var e=0===r?0:t;i(this).css({width:s,height:s,marginLeft:e})}),o.picker.css("paddingBottom",s+t),l.height(s+t+p)},_addInputListeners:function(i){var r=this,e=function(e){var t=new Color(i.val()),s=i.val().replace(/^#/,"");i.removeClass("iris-error"),t.error?""!==s&&i.addClass("iris-error"):t.toString()!==r._color.toString()&&("keyup"===e.type&&s.match(/^[0-9a-fA-F]{3}$/)||r._setOption("color",t.toString()))};i.on("change",e).on("keyup",r._debounce(e,100)),r.options.hide&&i.one("focus",function(){r.show()})},_initControls:function(){var r=this,e=r.controls,t=e.square,s=r.options.controls,o=r._scale[s.strip];e.stripSlider.slider({orientation:"vertical",max:o,slide:function(i,e){r.active="strip","h"===s.strip&&(e.value=o-e.value),r._color[s.strip](e.value),r._change.apply(r,arguments)}}),e.squareDrag.draggable({containment:e.square.find(".iris-square-inner"),zIndex:1e3,cursor:"move",drag:function(i,e){r._squareDrag(i,e)},start:function(){t.addClass("iris-dragging"),i(this).addClass("ui-state-focus")},stop:function(){t.removeClass("iris-dragging"),i(this).removeClass("ui-state-focus")}}).on("mousedown mouseup",function(e){var t="ui-state-focus";e.preventDefault(),"mousedown"===e.type?(r.picker.find("."+t).removeClass(t).blur(),i(this).addClass(t).focus()):i(this).removeClass(t)}).on("keydown",function(i){var t=e.square,s=e.squareDrag,o=s.position(),a=r.options.width/100;switch(i.altKey&&(a*=10),i.keyCode){case 37:o.left-=a;break;case 38:o.top-=a;break;case 39:o.left+=a;break;case 40:o.top+=a;break;default:return!0}o.left=Math.max(0,Math.min(o.left,t.width())),o.top=Math.max(0,Math.min(o.top,t.height())),s.css(o),r._squareDrag(i,{position:o}),i.preventDefault()}),t.mousedown(function(e){var t,s;1===e.which&&i(e.target).is("div")&&(t=r.controls.square.offset(),s={top:e.pageY-t.top,left:e.pageX-t.left},e.preventDefault(),r._squareDrag(e,{position:s}),e.target=r.controls.squareDrag.get(0),r.controls.squareDrag.css(s).trigger(e))}),r.options.palettes&&r._paletteListeners()},_paletteListeners:function(){var r=this;r.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){r._color.fromCSS(i(this).data("color")),r.active="external",r._change()}).on("keydown.palette",".iris-palette",function(r){if(13!==r.keyCode&&32!==r.keyCode)return!0;r.stopPropagation(),i(this).click()})},_squareDrag:function(i,r){var e=this,t=e.options.controls,s=e._squareDimensions(),o=Math.round((s.h-r.position.top)/s.h*e._scale[t.vert]),a=e._scale[t.horiz]-Math.round((s.w-r.position.left)/s.w*e._scale[t.horiz]);e._color[t.horiz](a)[t.vert](o),e.active="square",e._change.apply(e,arguments)},_setOption:function(r,e){var t,s,o=this,a=o.options[r],n=!1;switch(o.options[r]=e,r){case"color":(e=""+e).replace(/^#/,""),(t=new Color(e).setHSpace(o.options.mode)).error?o.options[r]=a:(o._color=t,o.options.color=o.options[r]=o._color.toString(),o.active="external",o._change());break;case"palettes":n=!0,e?o._addPalettes():o.picker.find(".iris-palette-container").remove(),a||o._paletteListeners();break;case"width":n=!0;break;case"border":n=!0,s=e?"addClass":"removeClass",o.picker[s]("iris-border");break;case"mode":case"controls":if(a===e)return;return s=o.element,(a=o.options).hide=!o.picker.is(":visible"),o.destroy(),o.picker.remove(),i(o.element).iris(a)}n&&o._dimensions(!0)},_squareDimensions:function(i){var e,t,s=this.controls.square;return i!==r&&s.data("dimensions")?s.data("dimensions"):(t=this.controls.squareDrag,e={w:s.width()-t.width(),h:s.height()-t.height()},s.data("dimensions",e),e)},_isNonHueControl:function(i,r){return"square"===i&&"h"===this.options.controls.strip||"external"!==r&&("h"!==r||"strip"!==i)},_change:function(){var r=this,e=r.controls,t=r._getHSpaceColor(),s=["square","strip"],o=r.options.controls,a=o[r.active]||"external",n=r.hue;"strip"===r.active?s=[]:"external"!==r.active&&s.pop(),i.each(s,function(i,s){var a,n,l;if(s!==r.active)switch(s){case"strip":a="h"===o.strip?r._scale[o.strip]-t[o.strip]:t[o.strip],e.stripSlider.slider("value",a);break;case"square":n=r._squareDimensions(),l={left:t[o.horiz]/r._scale[o.horiz]*n.w,top:n.h-t[o.vert]/r._scale[o.vert]*n.h},r.controls.squareDrag.css(l)}}),t.h!==n&&r._isNonHueControl(r.active,a)&&r._color.h(n),r.hue=r._color.h(),r.options.color=r._color.toString(),r._inited&&r._trigger("change",{type:r.active},{color:r._color}),r.element.is(":input")&&!r._color.error&&(r.element.removeClass("iris-error"),r.element.val()!==r._color.toString()&&r.element.val(r._color.toString())),r._paint(),r._inited=!0,r.active=!1},_debounce:function(i,r,e){var t,s;return function(){var o,a,n=this,l=arguments;return o=function(){t=null,e||(s=i.apply(n,l))},a=e&&!t,clearTimeout(t),t=setTimeout(o,r),a&&(s=i.apply(n,l)),s}},show:function(){this.picker.show()},hide:function(){this.picker.hide()},toggle:function(){this.picker.toggle()},color:function(i){return!0===i?this._color.clone():i===r?this._color.toString():void this.option("color",i)}},i.widget("a8c.iris",n),i('<style id="iris-css">'+a+"</style>").appendTo("head")}(jQuery);